# exp006è¨ˆç”»: ã€ŒLess is Moreã€ã«ã‚ˆã‚‹ç²¾å¯†æœ€é©åŒ–

## ğŸ¯ åŸºæœ¬æˆ¦ç•¥

exp005ã®å¤±æ•—ï¼ˆéå­¦ç¿’ã«ã‚ˆã‚‹æ±åŒ–æ€§èƒ½ä½ä¸‹ï¼‰ã‚’å—ã‘ã¦ã€**ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã¨ç²¾å¯†æœ€é©åŒ–**ã«ã‚ˆã‚‹å …å®Ÿãªæ”¹å–„ã‚’ç›®æŒ‡ã™ã€‚

### æ ¸å¿ƒã‚¢ãƒ—ãƒ­ãƒ¼ãƒ: **è³ªçš„æ”¹å–„ > é‡çš„æ‹¡å¼µ**

- **ç‰¹å¾´é‡**: 45å€‹ â†’ **15-18å€‹**ã«å‰Šæ¸›
- **ãƒ¢ãƒ‡ãƒ«**: ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ã§ã¯ãªã**LightGBMå˜ä½“**ã«é›†ä¸­
- **æœ€é©åŒ–**: **ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¾¹åº•èª¿æ•´**
- **æ¤œè¨¼**: **CV vs Kaggleä¹–é›¢**ã®æœ€å°åŒ–é‡è¦–

## ğŸ“Š ç¾çŠ¶åˆ†æã¨ç›®æ¨™è¨­å®š

### ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³
- **exp004**: Kaggle=0.77990, CV=0.8462, ä¹–é›¢=0.0663 âœ…
- **exp005**: Kaggle=0.76315, CV=0.8507, ä¹–é›¢=0.0876 âŒ

### ç›®æ¨™
- **æœ€ä½**: Kaggle=0.785ï¼ˆexp004ã‹ã‚‰+0.005ï¼‰
- **ç†æƒ³**: Kaggle=0.795ï¼ˆ0.8ã«æ¥è¿‘ï¼‰
- **ä¹–é›¢**: <0.070ï¼ˆå¥å…¨ãªæ±åŒ–æ€§èƒ½ï¼‰

## ğŸ” Phase 1: æˆ¦ç•¥çš„ç‰¹å¾´é‡å‰Šæ¸›

### å‰Šæ¸›æˆ¦ç•¥

#### 1. é‡è¦åº¦ãƒ™ãƒ¼ã‚¹å‰Šæ¸›
exp004ã®ç‰¹å¾´é‡é‡è¦åº¦ã‹ã‚‰**ä¸‹ä½7-8ç‰¹å¾´é‡ã‚’é™¤å»**
```
ä¿æŒç¢ºå®šï¼ˆã‚³ã‚¢ç‰¹å¾´é‡ï¼‰:
- Sex_Pclassï¼ˆæœ€é‡è¦äº¤äº’ä½œç”¨ï¼‰
- Sex, Age, Fare, Pclassï¼ˆåŸºæœ¬4ç‰¹å¾´é‡ï¼‰
- Title_Grouped, HasCabinï¼ˆé«˜é‡è¦åº¦ã‚«ãƒ†ã‚´ãƒªï¼‰

å‰Šæ¸›å€™è£œï¼ˆé‡è¦åº¦ä¸‹ä½ï¼‰:
- Ticket_Length, Name_Length
- ä½é‡è¦åº¦çµ±è¨ˆç‰¹å¾´é‡
- åŠ¹æœã®è–„ã„äº¤äº’ä½œç”¨
```

#### 2. ã‚«ãƒ†ã‚´ãƒªç²’åº¦èª¿æ•´
é«˜æ¬¡å…ƒã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«ç‰¹å¾´é‡ã®**é©åº¦ãªçµ±åˆ**
```
ä¾‹ï¼šAge_Group
7åˆ†å‰² â†’ 4åˆ†å‰²ï¼ˆChild, Young, Adult, Seniorï¼‰

ä¾‹ï¼šCabin_Deck  
9ç¨®é¡ â†’ 5ç¨®é¡ï¼ˆA-C, D-E, F-G, T, Unknownï¼‰
```

#### 3. å†—é•·ç‰¹å¾´é‡é™¤å»
ç›¸é–¢>0.8ã®ç‰¹å¾´é‡ãƒšã‚¢ã‹ã‚‰**ä¸€æ–¹ã‚’å‰Šé™¤**

### æœ€çµ‚ç‰¹å¾´é‡ã‚»ãƒƒãƒˆï¼ˆ15-18å€‹äºˆå®šï¼‰
```python
core_features = [
    # åŸºæœ¬ç‰¹å¾´é‡ï¼ˆ4å€‹ï¼‰
    'Sex', 'Pclass', 'Age', 'Fare',
    
    # ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ«ï¼ˆ3å€‹ï¼‰
    'Title_Grouped', 'HasCabin', 'Embarked',
    
    # å®¶æ—æ§‹æˆï¼ˆ3å€‹ï¼‰
    'FamilySize', 'IsAlone', 'Surname_Count',
    
    # äº¤äº’ä½œç”¨ï¼ˆ2å€‹ï¼‰
    'Sex_Pclass', 'Age_Fare_Interaction',
    
    # çµ±è¨ˆç‰¹å¾´é‡ï¼ˆ3-6å€‹ï¼‰
    'Age_Rank_SexPclass', 'Fare_Rank_Pclass',
    'Age_Group', 'Fare_Group'  # æ¡ä»¶ä»˜ã
]
```

## âš™ï¸ Phase 2: LightGBMç²¾å¯†æœ€é©åŒ–

### Optunaãƒ™ãƒ¼ã‚¹è¶…ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ¢ç´¢

#### æ¢ç´¢ç©ºé–“è¨­è¨ˆ
```python
def objective(trial):
    params = {
        'objective': 'binary',
        'metric': 'binary_logloss',
        'verbosity': -1,
        'random_state': 42,
        
        # æ¢ç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
        'num_leaves': trial.suggest_int('num_leaves', 15, 60),
        'learning_rate': trial.suggest_float('learning_rate', 0.01, 0.15),
        'feature_fraction': trial.suggest_float('feature_fraction', 0.5, 1.0),
        'bagging_fraction': trial.suggest_float('bagging_fraction', 0.5, 1.0),
        'bagging_freq': trial.suggest_int('bagging_freq', 1, 10),
        
        # æ­£å‰‡åŒ–ï¼ˆé‡ç‚¹æ¢ç´¢ï¼‰
        'reg_alpha': trial.suggest_float('reg_alpha', 0.0, 2.0),
        'reg_lambda': trial.suggest_float('reg_lambda', 0.0, 2.0),
        'min_child_samples': trial.suggest_int('min_child_samples', 5, 50),
        'min_child_weight': trial.suggest_float('min_child_weight', 0.001, 1.0)
    }
    
    # ç›®æ¨™: CV vs Kaggleä¹–é›¢æœ€å°åŒ–
    cv_score = cross_validate(params)
    return cv_score  # ãŸã ã—ã€éå­¦ç¿’ç›£è¦–ã‚‚ä¸¦è¡Œå®Ÿæ–½
```

#### æœ€é©åŒ–ç›®æ¨™
- **ä¸»ç›®æ¨™**: CVç²¾åº¦æœ€å¤§åŒ–
- **åˆ¶ç´„**: Early Stoppingå›æ•°ç›£è¦–ï¼ˆ50å›ä»¥ä¸‹ï¼‰
- **ç›£è¦–**: CVæ¨™æº–åå·®ï¼ˆå®‰å®šæ€§é‡è¦–ï¼‰

### éå­¦ç¿’é˜²æ­¢ç­–

#### 1. å³æ ¼ãªEarly Stopping
```python
callbacks = [
    lgb.early_stopping(stopping_rounds=30),  # 50â†’30ã«çŸ­ç¸®
    lgb.log_evaluation(100)  # ãƒ­ã‚°é »åº¦å‰Šæ¸›
]
```

#### 2. æ­£å‰‡åŒ–é‡ç‚¹èª¿æ•´
- **reg_alpha**: L1æ­£å‰‡åŒ–ï¼ˆç‰¹å¾´é¸æŠåŠ¹æœï¼‰
- **reg_lambda**: L2æ­£å‰‡åŒ–ï¼ˆéå­¦ç¿’æŠ‘åˆ¶ï¼‰
- **min_child_samples**: ãƒªãƒ¼ãƒ•ã®æœ€å°ã‚µãƒ³ãƒ—ãƒ«æ•°

#### 3. ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³æ”¹å–„
```python
# ã‚ˆã‚Šå³æ ¼ãªæ¤œè¨¼
kfold = StratifiedGroupKFold(
    n_splits=7,  # 5â†’7ã«å¢—åŠ 
    shuffle=True,
    random_state=42
)
```

## ğŸ“ˆ Phase 3: æ±åŒ–æ€§èƒ½ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ 

### CV vs Kaggleä¹–é›¢ç›£è¦–
å„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å€™è£œã«å¯¾ã—ã¦ï¼š
1. **CVç²¾åº¦**ã‚’è¨˜éŒ²
2. **æœŸå¾…Kaggleç²¾åº¦**ã‚’æ¨å®šï¼ˆéå»å®Ÿé¨“ã®çµŒé¨“å¼ï¼‰
3. **ä¹–é›¢äºˆæ¸¬å€¤**ã‚’ç®—å‡º
4. ä¹–é›¢<0.070ã®å€™è£œã®ã¿æ¡ç”¨

### æ®µéšçš„è©•ä¾¡ãƒ—ãƒ­ã‚»ã‚¹
1. **20ç‰¹å¾´é‡**ã§ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ç¢ºèª
2. **18ç‰¹å¾´é‡**ã§å‰Šæ¸›åŠ¹æœæ¤œè¨¼
3. **15ç‰¹å¾´é‡**ã§æœ€çµ‚èª¿æ•´
4. å„æ®µéšã§CV vs æœŸå¾…Kaggleæ¯”è¼ƒ

## âš ï¸ ãƒªã‚¹ã‚¯ç®¡ç†

### ä¸»è¦ãƒªã‚¹ã‚¯
1. **ç‰¹å¾´é‡å‰Šæ¸›ã«ã‚ˆã‚‹æƒ…å ±æå¤±**
2. **å±€æ‰€æœ€é©è§£ã¸ã®åæŸ**
3. **æ”¹å–„å¹…ã®é™ç•Œ**

### å¯¾ç­–
1. **æ®µéšçš„å‰Šæ¸›**ã§æƒ…å ±æå¤±ã‚’ç›£è¦–
2. **è¤‡æ•°å›å®Ÿè¡Œ**ã§æœ€é©è§£ã®å®‰å®šæ€§ç¢ºèª
3. **å°æ”¹å–„ã§ã‚‚ä¾¡å€¤èªè­˜**ï¼ˆ+0.003ã‚‚æˆåŠŸï¼‰

### ä»£æ›¿ã‚·ãƒŠãƒªã‚ª
æ”¹å–„ãŒè¦‹ã‚‰ã‚Œãªã„å ´åˆï¼š
- **exp007**: Neural Networkå°å…¥
- **exp008**: å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿æ´»ç”¨
- **exp009**: ç‰©ç†çš„åˆ¶ç´„ãƒ¢ãƒ‡ãƒ«

## ğŸ›  å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### ç·äºˆæƒ³æ™‚é–“: **4-5æ™‚é–“**

#### Step 1: æº–å‚™ãƒ»åˆ†æï¼ˆ30åˆ†ï¼‰
- [ ] exp004é‡è¦åº¦åˆ†æ
- [ ] å‰Šæ¸›å€™è£œç‰¹å¾´é‡ç‰¹å®š
- [ ] ç›¸é–¢åˆ†æã«ã‚ˆã‚‹å†—é•·æ€§ç¢ºèª

#### Step 2: ç‰¹å¾´é‡å‰Šæ¸›å®Ÿé¨“ï¼ˆ90åˆ†ï¼‰
- [ ] 20ç‰¹å¾´é‡ç‰ˆæ§‹ç¯‰ãƒ»è©•ä¾¡
- [ ] 18ç‰¹å¾´é‡ç‰ˆæ§‹ç¯‰ãƒ»è©•ä¾¡  
- [ ] 15ç‰¹å¾´é‡ç‰ˆæ§‹ç¯‰ãƒ»è©•ä¾¡
- [ ] æœ€é©ç‰¹å¾´é‡ã‚»ãƒƒãƒˆæ±ºå®š

#### Step 3: ãƒã‚¤ãƒ‘ãƒ¼ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æœ€é©åŒ–ï¼ˆ150åˆ†ï¼‰
- [ ] Optunaç’°å¢ƒæ§‹ç¯‰
- [ ] 100å›ä»¥ä¸Šã®æœ€é©åŒ–å®Ÿè¡Œ
- [ ] å€™è£œãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®æ±åŒ–æ€§èƒ½è©•ä¾¡
- [ ] æœ€é©è§£é¸æŠ

#### Step 4: æœ€çµ‚ãƒ¢ãƒ‡ãƒ«ãƒ»è©•ä¾¡ï¼ˆ30åˆ†ï¼‰
- [ ] æœ€çµ‚ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã®è¨“ç·´
- [ ] ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿äºˆæ¸¬
- [ ] æå‡ºãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆ
- [ ] çµæœåˆ†æãƒ»æ–‡æ›¸åŒ–

## ğŸ¯ æˆåŠŸåŸºæº–

### æŠ€è¡“çš„æˆåŠŸ
- âœ… **Kaggleã‚¹ã‚³ã‚¢**: >0.785
- âœ… **CVä¹–é›¢**: <0.070
- âœ… **ç‰¹å¾´é‡æ•°**: â‰¤18å€‹
- âœ… **å®‰å®šæ€§**: CVæ¨™æº–åå·®<0.040

### æˆ¦ç•¥çš„æˆåŠŸ
- âœ… **éå­¦ç¿’åˆ¶å¾¡**ã®å®Ÿè·µçš„ç¿’å¾—
- âœ… **ç‰¹å¾´é‡é¸æŠ**ã®ç³»çµ±çš„æ‰‹æ³•ç¢ºç«‹
- âœ… **æœ€é©åŒ–ãƒ—ãƒ­ã‚»ã‚¹**ã®ä½“ç³»åŒ–

### å­¦ç¿’çš„æˆåŠŸ
- âœ… **ã€ŒLess is Moreã€**åŸç†ã®å®Ÿè¨¼
- âœ… **æ±åŒ–æ€§èƒ½é‡è¦–**ã®æ„è­˜ç¢ºç«‹
- âœ… **Titanicãƒ‰ãƒ¡ã‚¤ãƒ³**ã®ç†è§£æ·±åŒ–

---

**exp006ã¯ã€ŒæŠ€è¡“çš„ç†Ÿç·´ã€ã‹ã‚‰ã€Œæ©Ÿæ¢°å­¦ç¿’ã®æœ¬è³ªç†è§£ã€ã¸ã®é‡è¦ãªè»¢æ›ç‚¹ã¨ãªã‚‹å®Ÿé¨“ã§ã™ã€‚**

ã‚·ãƒ³ãƒ—ãƒ«ã§å …å®Ÿãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã«ã‚ˆã‚Šã€æŒç¶šå¯èƒ½ãªæ”¹å–„ã‚’ç›®æŒ‡ã—ã¾ã™ã€‚