# exp007: Domain Expert Strategy - タイタニック号の歴史的事実に基づく特徴量エンジニアリング

## 🎯 実験概要

タイタニック号事故の歴史的事実とドメイン知識を活用した特徴量設計。
「Women and Children First」原則や物理的配置など、事故の実態を反映。

## 📊 結果サマリー

- **Kaggleスコア**: 0.77751
- **CVスコア**: 実行時に記録（ノートブック参照）
- **特徴量数**: 約25個（ドメイン特徴量含む）
- **判定**: exp004には及ばないが、exp001/006より改善

## 🔍 戦略と手法

### 1. ドメインベース特徴量設計

#### Rescue_Priority（救助優先度スコア）
- **Women and Children First原則の数値化**
- 女性: +100点
- 16歳未満の子供: +80点
- 母親（女性で子供同伴）: +20点追加
- 社会階級による調整（1等: +15点）

#### Location_Score（物理的位置スコア）
- **デッキ位置による救命ボートへの近さ**
- Aデッキ: 100点（最上層、救命ボート最寄り）
- B〜Tデッキ: 段階的に減点
- 客室なし: 0点（下層デッキ推定）

#### グループダイナミクス
- **Ticket_Group_Size**: 同一チケット保有者数
- **Surname_Group_Size**: 同一苗字グループサイズ
- **Is_Family_Group**: 家族判定フラグ

#### 総合指標
- **Survival_Score**: 複数要因の重み付き合計
- **Risk_Score**: 危険度の逆指標

### 2. 実装のポイント
- exp004の成功要因（回帰モード）を継承
- ドメイン知識と統計的特徴量の融合
- 過度な複雑化を避けつつ本質的な要因を捕捉

## 📈 性能比較

| 実験 | Kaggle | 特徴量数 | 改善点 |
|------|--------|----------|--------|
| exp001 | 0.77272 | 16 | ベースライン |
| exp004 | 0.77990 | 23 | 最高スコア |
| exp006 | 0.77272 | 15 | シンプル化 |
| **exp007** | **0.77751** | **25** | **ドメイン知識** |

## 🔍 分析結果

### ✅ 成功点
1. **exp001/006から改善**（+0.00479）
2. **ドメイン知識の有効性を実証**
3. **解釈可能な特徴量設計**
4. **歴史的事実との整合性**

### ⚠️ 課題点
1. **exp004には及ばず**（-0.00239）
2. **一部のドメイン特徴量が期待ほど効果的でない可能性**
3. **特徴量数増加による複雑化**

## 💡 重要な学び

### ドメイン知識の価値
- **Rescue_Priority**が一定の効果を示す
- 歴史的事実に基づく特徴量は解釈性が高い
- しかし統計的特徴量には及ばない場合も

### 特徴量設計の難しさ
- 直感的に重要と思われる要因が必ずしも予測に寄与しない
- ドメイン知識と統計的手法のバランスが重要
- 過度な仮説は過学習リスクを高める

## 🎯 次の戦略候補

### Option A: ドメイン特徴量の精緻化
- 効果の薄い特徴量を削除
- Rescue_Priorityの重み調整
- より詳細な物理的位置推定

### Option B: Strategy A（Smart Ensemble）への移行
- exp007をベースモデルの1つとして活用
- LightGBM + RandomForest + LogisticRegression
- 各モデルで異なる特徴量セット使用

### Option C: 特徴量の交互作用強化
- ドメイン特徴量 × 基本特徴量の交互作用
- 非線形パターンの捕捉
- 条件付き特徴量の追加

## 📊 実験詳細

### 主要なドメイン特徴量の効果（推定）
- **Rescue_Priority**: 中程度の重要度
- **Location_Score**: 限定的な効果
- **グループサイズ系**: 補助的な役割
- **総合スコア**: 一定の寄与

### 技術的詳細
- LightGBM回帰モード使用（exp004踏襲）
- 5-fold Cross Validation
- Early Stopping適用
- 閾値0.5で2値化

## 📝 結論

exp007は**ドメイン知識の活用により一定の改善を達成**。0.77751はexp001/006を上回るが、exp004には及ばず。

**主要な成果**:
- タイタニック号の歴史的事実を特徴量化
- 解釈可能性の高いモデル構築
- ドメイン知識の有効性と限界を確認

**今後の方向性**:
より高い性能を目指すには、ドメイン知識だけでなく、統計的手法やアンサンブル技術との組み合わせが必要。exp008ではSmart Ensemble戦略の検討を推奨。

---

**「ドメイン知識は重要だが、データが語る真実も同様に重要」**